diff --git a/components/FocusActionView.tsx b/components/FocusActionView.tsx
index 2e28ca5..486fc8a 100644
--- a/components/FocusActionView.tsx
+++ b/components/FocusActionView.tsx
@@ -16,7 +16,10 @@ export const FocusActionView: React.FC = () => {
     setExpandedSections(next);
   };
 
-  const actionable = state.threads.filter(t => t.bucket !== 'Cleared');
+  // Guard: prevent blank-screen if threads is ever undefined/non-array
+const threads: Thread[] = Array.isArray((state as any).threads) ? ((state as any).threads as Thread[]) : [];
+const actionable = threads.filter(t => t.bucket !== 'Cleared');
+
 
   // Logic: 
   // 1. Do Now: (Overdue >= 4d OR Follow-up passed) AND Priority High
diff --git a/patch-03-focus-action-render.patch b/patch-03-focus-action-render.patch
deleted file mode 100644
index e69de29..0000000
diff --git a/vite.config.ts b/vite.config.ts
index ee5fb8d..339c6c0 100644
--- a/vite.config.ts
+++ b/vite.config.ts
@@ -1,9 +1,9 @@
 import path from 'path';
-import { defineConfig, loadEnv } from 'vite';
+import { defineConfig } from 'vite';
 import react from '@vitejs/plugin-react';
 
 export default defineConfig(({ mode }) => {
-    const env = loadEnv(mode, '.', '');
+  
     return {
       server: {
         port: 3000,
@@ -11,8 +11,8 @@ export default defineConfig(({ mode }) => {
       },
       plugins: [react()],
       define: {
-        'process.env.API_KEY': JSON.stringify(env.GEMINI_API_KEY),
-        'process.env.GEMINI_API_KEY': JSON.stringify(env.GEMINI_API_KEY)
+  envPrefix: 'VITE_',
+
       },
       resolve: {
         alias: {
